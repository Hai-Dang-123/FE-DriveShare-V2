# Building a Dev Client (Android) with EAS - Quick Guide

This project uses native VietMap modules (`@vietmap/*`), which are not included in Expo Go. To test native map features on a device you must build and install a custom dev-client or a full app binary.

Prerequisites (Windows / Android):
- Node.js and npm/yarn
- Android Studio (with SDK & platform-tools) or at least `adb` + suitable device/emulator
- Java JDK (11+)
- `eas-cli` installed or use `npx eas`:
  ```powershell
  npm install -g eas-cli
  # or use npx: npx eas login
  ```
- Login to EAS if using cloud builds: `eas login`

Basic options:

1) Quick cloud dev-client build (recommended when you don't want to manage native toolchain locally)

- Build a development dev-client (internal distribution):
```powershell
# In project root
npx eas build --platform android --profile development
```

- After the build completes, download the generated `.apk` from EAS and install it on your Android device (or use the EAS links to install directly).

- Start Metro in dev-client mode:
```powershell
npx expo start --dev-client --tunnel
```

- Open the installed dev-client app on your device and connect to the running Metro tunnel.

2) Local dev-client / run (requires native toolchain)

- Prebuild native projects (generates `android/`):
```powershell
npx expo prebuild --platform android
```

- Run on a connected device/emulator (after prebuild):
```powershell
npx expo run:android
```

- Or build and install a local dev-client APK using EAS but triggered locally via `eas build` is still cloud-based; to build fully locally you must use Android Studio to assemble the project generated by `prebuild`.

3) Notes and tips

- Expo Go DOES NOT contain third-party native modules like `@vietmap/vietmap-gl-react-native`. That's why native map features will fail under Expo Go and require a custom dev-client or full build.
- Use the `development` profile in `eas.json` for dev-client builds. This repo already includes dev profiles that set `developmentClient: true` for development builds.
- If you change native dependencies after prebuild, run `npx expo prebuild` again to update native projects.
- For continuous iteration, build a dev-client once (cloud or local), then run `npx expo start --dev-client` and you can reload JS code without rebuilding native binaries.

4) Common commands summary

```powershell
# Install eas cli (global)
npm install -g eas-cli

# Cloud build dev-client (Android)
npx eas build --platform android --profile development

# Start metro for dev-client
npx expo start --dev-client --tunnel

# Local prebuild + run on Android (requires Android SDK & JDK)
npx expo prebuild --platform android
npx expo run:android
```

If you'd like, I can:
- Add a short script to `package.json` for common EAS commands.
- Prepare a short checklist of environment variables and Android SDK setup for Windows.
- Start a cloud build for you (requires you to be logged in to EAS from this machine).

